<div id="personal-info">
  <h3 class='section-heading'>Contact Information</h3>

  <div class="personal-info-errors"></div>

  <%= form_for @sale, :remote => true, :url => update_personal_info_path, :method => 'patch', :html => {:id => "personal_info_form"} do |f| %>
    <div class='card'>
      <% if @sale.errors.any? %>
        <div id="error_explanation">
          <ul>
          <% @sale.errors.full_messages.each do |msg| %>
            <li style="color:red"><%= msg %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <div class='form-row'>
        <%= f.text_field :name, class: "big full", placeholder: "Full Name" %>
      </div>

      <div class='form-row'>
        <%= f.text_field :email, class: "big full", placeholder: "Email Address" %>
      </div>

      <%= f.hidden_field :redemption_code %>
      <%= f.hidden_field :is_info_form, value: true %>
    </div>

    <% if @sale.email %>
      <div class="form-footer grid align-middle no-gutter">
        <div class="grid-cell one-of-two">
          <%= link_to 'Cancel', summarize_sale_path(@sale), class: 'back-link' %>
        </div>
        <div class="grid-cell one-of-two align-right">
          <button type="submit" class="primary-button">Save Changes</button>
        </div>
      </div>
    <% else %>
    <%= render partial: "checkout_form", locals: { button_text: "Continue" } %>
    <% end %>
  <% end %>
</div>
